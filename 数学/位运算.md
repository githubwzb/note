# 位运算
## 简介
符号	|描述	|运算规则|
:-|:-|:-|
&	|与	|两个位都为1时，结果才为1
\|	|或|	两个位都为0时，结果才为0
$\land$	|异或|	两个位相同为0，相异为1
~	|取反|	0变1，1变0
<<	|左移|	各二进位全部左移若干位，高位丢弃，低位补0
\>\>	|右移|	各二进位全部右移若干位，对无符号数，高位补0，有符号数，各编译器处理方法不一样，有的补符号位（算术右移），有的补0（逻辑右移）
### 例子
$3<<4=(00000100)_2<<4=(01000000)_2=64$
### 取反与补码
正数和零的补码为其本身，求负整数的补码，将其原码除符号位（从左至右第一位）外的所有位取反（0变1，1变0，符号位为1不变）后加1
$(-7)_{的补码}=(11111001)_2$
一般的有
负数的补码所代指的无符号正数+负数的绝对值=模
以及
$a+(-b)=a+(b)_{补}$
### 移位
移位运算中如果出现如下情况，则其行为未定义：

- 右操作数（即移位数）为负值；
- 右操作数大于等于左操作数的位数；

例如，对于 `int` 类型的变量 a ， `a<<-1` 和 `a<<32` 都是未定义的。
## 位运算的应用
位运算一般有三种作用：

1. 高效地进行某些运算，代替其它低效的方式。

2. 表示集合。（常用于 **状压DP** 。）

3. 题目本来就要求进行位运算。

### 乘 2 的非负整数次幂
```c++
int mulPowerOfTwo(int n, int m) {  // 计算 n*(2^m)
  return n << m;
}
```
### 除以 2 的非负整数次幂
```C++
int divPowerOfTwo(int n, int m) {  // 计算 n/(2^m)
  return n >> m;
}
```
> ==注意== 
> n不能为负。

### ==判断一个数是不是 2 的正整数次幂==
```c++
bool isPowerOfTwo(int n) { 
    return n > 0 && (n & (n - 1)) == 0;
     }
```

### ==取绝对值==
在某些机器上，效率比` n > 0 ? n : -n `高。
```c++

int Abs(int n) {
  return (n ^ (n >> 31)) - (n >> 31);
  /* n>>31 取得 n 的符号，若 n 为正数，n>>31 等于 0，若 n 为负数，n>>31 等于 -1
     若 n 为正数 n^0=n, 数不变，若 n 为负数有 n^(-1)
     需要计算 n 和 -1 的补码，然后进行异或运算，
     结果 n 变号并且为 n 的绝对值减 1，再减去 -1 就是绝对值 */
}
```

### 表示集合
一个数的二进制表示可以看作是一个集合（0 表示不在集合中，1 表示在集合中）。比如集合 {1, 3, 4, 8} ，可以表示成  。而对应的位运算也就可以看作是对集合进行的操作。

操作|	集合表示	|位运算语句
:-|:-|:-
交集	|$a \cap b$ |a & b
并集	|$a \cup b$	|a\|b
补集	|$\bar{a}$  |~a （全集为二进制都是 1）
差集	|$a\setminus b$|	a & (~b)
对称差	|$a\triangle b$|	a ^ b

### 遍历某个集合的子集（子集枚举）
```c++
for(int s=u;s;s=u&(s-1))
{
    需要的操作。
}
```